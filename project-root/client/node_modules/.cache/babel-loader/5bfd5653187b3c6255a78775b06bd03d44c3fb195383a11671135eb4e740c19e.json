{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate,useParams}from'react-router-dom';import'./PostDetail.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PostDetail(){const{memoryId}=useParams();const[memory,setMemory]=useState(null);const[comments,setComments]=useState([]);// 댓글 상태 추가\nconst navigate=useNavigate();// 게시글 상세 정보 가져오기\nuseEffect(()=>{const fetchMemoryDetails=async()=>{try{// API 요청\nconst response=await fetch(`/api/posts/${memoryId}`);if(response.ok){const data=await response.json();setMemory(data);// 게시글 정보 설정\nsetComments(data.comments||[]);// 댓글 정보 설정\n}else{// 오류 처리\nconst errorData=await response.json();console.error('데이터 가져오기 실패:',errorData.message);}}catch(error){console.error('데이터 가져오기 에러:',error);}};fetchMemoryDetails();},[memoryId]);// 추억 수정하기\nconst handleEditMemory=()=>{navigate(`/PostEdit/${memoryId}`);};// 추억 삭제하기\nconst handleDeleteMemory=()=>{navigate(`/PostDelete/${memoryId}`);};// 공감 보내기\nconst handleSendEmpathy=()=>{// 추억 공감 수 증가 로직\nsetMemory(prev=>({...prev,likes:prev.likes+1}));};// 댓글 등록하기\nconst handleCreateComment=()=>{navigate('/CommentCreate');};// 댓글 수정하기\nconst handleEditComment=commentId=>{navigate(`/CommentEdit/${commentId}`);};// 댓글 삭제하기\nconst handleDeleteComment=commentId=>{navigate(`/CommentDelete/${commentId}`);};if(!memory)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"post-detail-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"memory-info-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"memory-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:memory.nickname}),\" | \",/*#__PURE__*/_jsx(\"span\",{children:memory.isPublic?'공개':'비공개'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"memory-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-button\",onClick:handleEditMemory,children:\"\\uCD94\\uC5B5 \\uC218\\uC815\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-button\",onClick:handleDeleteMemory,children:\"\\uCD94\\uC5B5 \\uC0AD\\uC81C\\uD558\\uAE30\"})]})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"memory-title\",children:memory.title}),/*#__PURE__*/_jsx(\"p\",{className:\"memory-tags\",children:memory.tags.join(', ')}),/*#__PURE__*/_jsxs(\"div\",{className:\"memory-stats\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uC791\\uC131\\uC77C: \",memory.moment]}),\" |\",/*#__PURE__*/_jsxs(\"span\",{children:[\" \\uACF5\\uAC10 \",memory.likeCount]}),\" |\",/*#__PURE__*/_jsxs(\"span\",{children:[\" \\uB313\\uAE00 \",memory.commentCount]}),/*#__PURE__*/_jsx(\"button\",{className:\"empathy-button\",onClick:handleSendEmpathy,children:\"\\uACF5\\uAC10 \\uBCF4\\uB0B4\\uAE30\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"memory-image\",children:/*#__PURE__*/_jsx(\"img\",{src:memory.imageUrl,alt:\"\\uCD94\\uC5B5 \\uC774\\uBBF8\\uC9C0\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"memory-content\",children:/*#__PURE__*/_jsx(\"p\",{children:memory.content})}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-create-button\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateComment,children:\"\\uB313\\uAE00 \\uB4F1\\uB85D\\uD558\\uAE30\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"comment-list\",children:comments.map(comment=>/*#__PURE__*/_jsxs(\"div\",{className:\"comment-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-meta\",children:[/*#__PURE__*/_jsx(\"span\",{children:comment.author}),\" | \",/*#__PURE__*/_jsx(\"span\",{children:comment.date})]}),/*#__PURE__*/_jsx(\"p\",{children:comment.content}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditComment(comment.id),children:\"\\uB313\\uAE00 \\uC218\\uC815\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteComment(comment.id),children:\"\\uB313\\uAE00 \\uC0AD\\uC81C\\uD558\\uAE30\"})]})]},comment.id))})]});}export default PostDetail;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","jsx","_jsx","jsxs","_jsxs","PostDetail","memoryId","memory","setMemory","comments","setComments","navigate","fetchMemoryDetails","response","fetch","ok","data","json","errorData","console","error","message","handleEditMemory","handleDeleteMemory","handleSendEmpathy","prev","likes","handleCreateComment","handleEditComment","commentId","handleDeleteComment","children","className","nickname","isPublic","onClick","title","tags","join","moment","likeCount","commentCount","src","imageUrl","alt","content","map","comment","author","date","id"],"sources":["C:/Users/user/Desktop/2024-2/boost/memoryMain/memory/project-root/client/src/post/PostDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport './PostDetail.css';\r\n\r\nfunction PostDetail() {\r\n  const { memoryId } = useParams();\r\n  const [memory, setMemory] = useState(null);\r\n  const [comments, setComments] = useState([]); // 댓글 상태 추가\r\n  const navigate = useNavigate();\r\n\r\n  // 게시글 상세 정보 가져오기\r\n  useEffect(() => {\r\n    const fetchMemoryDetails = async () => {\r\n      try {\r\n        // API 요청\r\n        const response = await fetch(`/api/posts/${memoryId}`);\r\n        \r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setMemory(data); // 게시글 정보 설정\r\n          setComments(data.comments || []); // 댓글 정보 설정\r\n        } else {\r\n          // 오류 처리\r\n          const errorData = await response.json();\r\n          console.error('데이터 가져오기 실패:', errorData.message);\r\n        }\r\n      } catch (error) {\r\n        console.error('데이터 가져오기 에러:', error);\r\n      }\r\n    };\r\n\r\n    fetchMemoryDetails();\r\n  }, [memoryId]);\r\n\r\n  // 추억 수정하기\r\n  const handleEditMemory = () => {\r\n    navigate(`/PostEdit/${memoryId}`);\r\n  };\r\n\r\n  // 추억 삭제하기\r\n  const handleDeleteMemory = () => {\r\n    navigate(`/PostDelete/${memoryId}`);\r\n  };\r\n\r\n  // 공감 보내기\r\n  const handleSendEmpathy = () => {\r\n    // 추억 공감 수 증가 로직\r\n    setMemory((prev) => ({ ...prev, likes: prev.likes + 1 }));\r\n  };\r\n\r\n  // 댓글 등록하기\r\n  const handleCreateComment = () => {\r\n    navigate('/CommentCreate');\r\n  };\r\n\r\n  // 댓글 수정하기\r\n  const handleEditComment = (commentId) => {\r\n    navigate(`/CommentEdit/${commentId}`);\r\n  };\r\n\r\n  // 댓글 삭제하기\r\n  const handleDeleteComment = (commentId) => {\r\n    navigate(`/CommentDelete/${commentId}`);\r\n  };\r\n\r\n  if (!memory) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"post-detail-container\">\r\n      {/* 추억 상단 정보 */}\r\n      <div className=\"memory-info-box\">\r\n        <div className=\"memory-header\">\r\n          <div>\r\n            <span>{memory.nickname}</span> | <span>{memory.isPublic ? '공개' : '비공개'}</span>\r\n          </div>\r\n          <div className=\"memory-actions\">\r\n            <button className=\"action-button\" onClick={handleEditMemory}>추억 수정하기</button>\r\n            <button className=\"action-button\" onClick={handleDeleteMemory}>추억 삭제하기</button>\r\n          </div>\r\n        </div>\r\n        <h1 className=\"memory-title\">{memory.title}</h1>\r\n        <p className=\"memory-tags\">{memory.tags.join(', ')}</p>\r\n        <div className=\"memory-stats\">\r\n          <span>작성일: {memory.moment}</span> | \r\n          <span> 공감 {memory.likeCount}</span> | \r\n          <span> 댓글 {memory.commentCount}</span>\r\n          <button className=\"empathy-button\" onClick={handleSendEmpathy}>공감 보내기</button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 추억 이미지 */}\r\n      <div className=\"memory-image\">\r\n        <img src={memory.imageUrl} alt=\"추억 이미지\" />\r\n      </div>\r\n\r\n      {/* 추억 내용 */}\r\n      <div className=\"memory-content\">\r\n        <p>{memory.content}</p>\r\n      </div>\r\n\r\n      {/* 댓글 등록하기 버튼 */}\r\n      <div className=\"comment-create-button\">\r\n        <button onClick={handleCreateComment}>댓글 등록하기</button>\r\n      </div>\r\n\r\n      {/* 댓글 목록 */}\r\n      <div className=\"comment-list\">\r\n        {comments.map((comment) => (\r\n          <div key={comment.id} className=\"comment-card\">\r\n            <div className=\"comment-meta\">\r\n              <span>{comment.author}</span> | <span>{comment.date}</span>\r\n            </div>\r\n            <p>{comment.content}</p>\r\n            <div className=\"comment-actions\">\r\n              <button onClick={() => handleEditComment(comment.id)}>댓글 수정하기</button>\r\n              <button onClick={() => handleDeleteComment(comment.id)}>댓글 삭제하기</button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PostDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}